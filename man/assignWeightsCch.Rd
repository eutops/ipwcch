% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/assignWeightsCch.R
\name{assignWeightsCch}
\alias{assignWeightsCch}
\title{Assign Dynamic Weights for Case-Cohort Analysis}
\source{
O'Brien et al. (2022). \emph{The Case for Case-Cohort: An Applied Epidemiologist's Guide to Reframing Case-Cohort Studies to Improve Usability and Flexibility}.
\doi{10.1097/EDE.0000000000001469}
}
\usage{
assignWeightsCch(cohort_dat, Psub, eps = 5e-05)
}
\arguments{
\item{cohort_dat}{A \code{data.frame} with one row per individual. Required columns:
\itemize{
\item \code{id}: Unique individual identifier.
\item \code{time}: Time of event or censoring.
\item \code{status}: 1 if the event occurred, 0 if censored.
\item \code{subcohort}: 1 if in the randomly selected subcohort, 0 otherwise.
}}

\item{Psub}{A numeric value representing the sampling probability of being included in the subcohort (e.g., 0.1 for 10\%).}

\item{eps}{A small positive numeric value used to offset event times slightly for weight transitions (default is \code{0.00005}).}
}
\value{
A \code{data.frame} with additional columns:
\itemize{
\item \code{entry}, \code{exit}: Time intervals for dynamic risk modeling.
\item \code{from}, \code{to}: Transition states (used for multi-state models).
\item \code{weight}: Assigned analytical weights for each interval.
}
}
\description{
Assigns dynamic time-dependent weights to a case-cohort dataset for survival analysis,
preparing it for use with Cox proportional hazards models. The function transforms the input
dataset by assigning weights based on case/subcohort status and event time, duplicating rows
where necessary to represent changes in weight just before an event.
}
\details{
The function creates an entry-exit format dataset with dynamic weights:
\itemize{
\item Individuals in the subcohort are given a weight of \code{1/Psub} before any event.
\item Cases in the subcohort have their weight changed to 1 just before the event.
\item Cases not in the subcohort are assigned a weight of 1 just before the event.
\item Controls not in the subcohort are not included (weight remains 0).
}

The output dataset can be used directly with Cox proportional hazards models
that accept start-stop format (e.g., \code{coxph(Surv(entry, exit, event) ~ ...)})
}
\examples{
\dontrun{
Psub <- 0.1  # Example: 10\% subcohort sampling
cohort_weighted <- assignWeightsCch(my_data, Psub, eps = 1e-5)
}

}
