% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/weightedRoc.R
\name{weightedRoc}
\alias{weightedRoc}
\title{Compute a Weighted ROC Curve for Time-to-Event Data}
\usage{
weightedRoc(dat, t_eval, marker, event_code = "1", eps = 0)
}
\arguments{
\item{dat}{A data frame containing survival data with the following required columns:
- `entry`: Entry time (e.g., time at risk begins)
- `exit`: Exit time (e.g., time of event or censoring)
- `to`: Event type or status code
- `weight`: Sampling or inverse-probability weight
- `marker`: A continuous biomarker or risk score used for ROC computation}

\item{t_eval}{Numeric value indicating the evaluation time point at which the ROC curve is computed.}

\item{marker}{Character string specifying the name of the column in `dat` containing the risk score or marker.}

\item{event_code}{Character or numeric value indicating the event of interest (default = "1").}

\item{eps}{Numeric value indicating the epsilon time buffer applied near the maximum follow-up time (`tmax`)
to avoid excluding individuals due to minor censoring timing variations (default = 0.0).}
}
\value{
A list containing:
  - `tpr`: True positive rates at each threshold
  - `fpr`: False positive rates at each threshold
  - `thresholds`: Sorted marker values corresponding to ROC points
  - `auc`: Area under the ROC curve
  - `call`: Function call
  - `t_eval`: Evaluation time used
}
\description{
Calculates a weighted ROC curve for a specified evaluation time (`t_eval`)
using time-to-event data with possible right-censoring and precalculated weights.
Designed for use in case-cohort where dynamic inverse sampling probability weights are applied.
Double-weighting (IPWC) could be done by multiplying IPW * IPCW weights, enter these for dat$weight.
When only IPW weights are calculated (administrative censoring), the size of the weights will have no effect
on the ROC shape nor the AUC, as such weights are constant for the case and control group at a given time point.
}
\details{
If `t_eval` is within `eps` of the maximum follow-up time (`tmax`), all observations are included
to ensure stability of the risk set and avoid excluding individuals who were censored slightly before `tmax`.

Ties in the marker variable are randomly broken.
}
\examples{
# Example usage with a survival dataset:
# weightedRoc(dat = mydata, t_eval = 365, marker = "risk_score", eps = 5)

}
